[![en](https://img.shields.io/badge/lang-en-blue.svg)](https://github.com/Kylsha/kolba/blob/main/README.md) 

## Kolba
![Table loook](https://pereverzev.info/easyPlugin/img/img_es.png)

Инструмент предназначен для тестирования Python-скриптов. В окне виджета инструмента необходимо указать путь к расположению файлов Python-скриптов. После определения пути в окне появятся все скрипты. Пользователь может их редактировать в любом другом редакторе, в то время как Scripter сможет запускать их актуальные версии. Грубо говоря, скрипты в этом окне — это ссылки на файлы. Это может быть полезным в совместной работе при наличии папки с общим доступом. Например, пользователи тестируют скрипт, находят в нем баги, сообщают об этом разработчику. Последний делает исправления и сообщает тестировщикам о том, что ошибки исправлены, после чего все могут запускать актуальную версию скрипта без каких-либо обновлений. 

>[!NOTE]
> Данный инструмент был позитивно принят коллегами за его простоту в использовании. В какой-то момент я даже решил отойти от концепции плагинов, которые необходимо обновлять через репозиторий или другим образом вручную. По сути многие плагины можно хранить в формате одного файла-скрипта и запускать из окна данного инструмента. Такой способ более удобный в части регулярной работы в части разработки в QGIS. Как указано выше, пользователям, которые тестируют скрипты в данном инструменте, не нужно ничего обновлять через репозитории или переустанавливать zip-архивы, достаточно всего лишь перезапустить скрипт из окна Scripter.

Скрипты, запускаемые из Scripter, должны содержать все необходимые для работы библиотеки для корректной работы. В противном случае Scripter сообщить, что в скрипте есть ошибка, которая будет выведена в окно консоли Python в QGIS. Поэтому, несмотря на то, что некоторые библиотеки могут быть импортированы при запуске QGIS, они должны быть также указаны в файлах скрипта.

### Инструкция

К примеру, имеется скрипт, который может быть запущен из редакторы консоли QGIS:

```
from qgis.utils import iface
from PyQt5.QtWidgets import QWidget, QPushButton, QVBoxLayout

class TestWidget(QWidget):
    def __init__(self):
        super().__init__()
        self.resize(250, 100)
        self.setWindowTitle("Test widget")
        layout = QVBoxLayout(self)
        button = QPushButton("Check active layer")
        layout.addWidget(button)
        button.clicked.connect(self.get_current_layer)
        self.show()

    def get_current_layer(self):
        active_layer = iface.activeLayer()
        if active_layer:
            print(active_layer.name())
        else:
            print('no layers in project')
app = TestWidget()
```

>[!NOTE]
> Модули `iface` and `PyQt5` импортированы в шапке скрипта, так как это требуется для корректного запуска из Scripter.

Данный скрипт может быть сохранен как Python-файл (например, `my_widget.py`) и помещен в папку, путь к которой указывается в окне Scripter. Для обновления содержимого папки в Scripter можно нажать кнопку с синими стрелками. Скрипт можно запустить двойным кликом по нему или выбором скрипта с последующим нажатием кнопки со знаком ▶︎.

В правой части окна Scripter расположена информация о запускаемых файлах. Чтобы добавить такую информацию, необходимо создать файл `descriptions.json` в папке, путь к которой указан в окне Scripter. Содержимое этого файла должно иметь следующий вид словаря:
```
{
    "test": "A sample Python code snippet.",
    "my_widget": "PyQt5 widget to show active layers name"
}
```
здесь в качестве ключей выступают названия файлов без расширения, а значения — непосредственно описания.

За счет импортов всех необходимых библиотек (виджеты PyQt и др.) скрипты могут быть в дальнейшем использованы как компоненты полноценных плагинов.

Видеоинструкция:

https://github.com/Kylsha/easyPlugin/assets/25682040/67390440-8ca9-4c46-9284-0677c74a3be9

